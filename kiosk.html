<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kiosk Layout</title>

    <style>

        /* ============================
           GLOBAL PAGE LAYOUT
           ============================ */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: #f4f4f4;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }


        /* ============================
           TOP SECTION LAYOUT
           ============================ */
        .top {
            flex: 0 0 20%;
            background: #ffffff;
            color: #003366;
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            padding: 20px;
            box-sizing: border-box;
        }

        .datetime,
        .logo,
        .weather {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .datetime,
        .weather {
            transform: translateY(15%);
        }


        /* ============================
           DATE + TIME TEXT STYLES
           ============================ */
        .date {
            font-size: 1.4vw;
            font-weight: bold;
            white-space: nowrap;
        }

        .time {
            font-size: 5vw;
            font-weight: bold;
            line-height: 1.0;
            margin-top: 5px;
        }


        /* ============================
           LOGO IMAGE
           ============================ */
        .logo img {
            max-height: 100%;
            max-width: 100%;
        }


        /* ============================
           DATETIME + WEATHER BOXES
           ============================ */
        .datetime-box,
        .weather-box {
            width: 70%;
            height: 70%;
            border-radius: 15px;
            padding: 10px 20px;
            transition: background 1.2s ease-in-out, color 0.6s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }

        .datetime-box {
            flex-direction: column;
            text-align: center;
        }


        /* ============================
           WEATHER CONTENT LAYOUT
           ============================ */
        .weather-content {
            position: relative;
            top: -5px;
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .weather-left {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .weather-right {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .weather-icon {
            width: 60px;
            height: 60px;
            margin-bottom: 5px;
        }

        .weather-temp {
            font-size: 6vw;
            font-weight: bold;
            margin-top: 0;
            line-height: 1.0;
        }

        .weather-condition {
            font-size: 1.4vw;
            margin-top: 5px;
            font-weight: bold;
        }


        /* ============================
           TEXT COLOR HELPERS
           ============================ */
        .text-white { color: white; }
        .text-blue  { color: #003366; }


        /* ============================
           WEATHER GRADIENTS — DAY
           ============================ */
        .grad-clear   { background: linear-gradient(to bottom, #6db3f2, #1e69de); }
        .grad-partly  { background: linear-gradient(to bottom, #8bb8e8, #4a6fa5); }
        .grad-cloudy  { background: linear-gradient(to bottom, #bfc3c7, #8a8f94); }
        .grad-fog     { background: linear-gradient(to bottom, #d9d9d9, #bfbfbf); }
        .grad-rain    { background: linear-gradient(to bottom, #5f7c8a, #2f4858); }
        .grad-snow    { background: linear-gradient(to bottom, #e6f0f7, #b7c9d9); }
        .grad-thunder { background: linear-gradient(to bottom, #3a3f47, #1f2328); }


        /* ============================
           WEATHER GRADIENTS — NIGHT
           ============================ */
        .grad-night-clear   { background: linear-gradient(to bottom, #1b2735, #090a0f); }
        .grad-night-cloudy  { background: linear-gradient(to bottom, #4a4f57, #2c3035); }
        .grad-night-rain    { background: linear-gradient(to bottom, #3c4a52, #1f2a30); }
        .grad-night-snow    { background: linear-gradient(to bottom, #dfe9f2, #b7c9d9); }
        .grad-night-thunder { background: linear-gradient(to bottom, #2b2f36, #13151a); }


        /* ============================
           ANNOUNCEMENTS BAR
           ============================ */
        .announcements {
            flex: 0 0 20%;
            background: #f9f9f2;
            border-top: 4px solid #003366;
            border-bottom: 4px solid #003366;
            padding: 20px;
            box-sizing: border-box;
            font-size: 1.6vw;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            text-align: center;
            overflow-y: auto;
            max-height: 100%;
        }


        /* ============================
           BUTTON GRID + BUTTON STYLES
           ============================ */
        .buttons {
            flex: 1;
            padding: 20px;
            box-sizing: border-box;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 15px;
            background:
                radial-gradient(circle at 10% 20%, rgba(20,40,120,0.70) 0%, transparent 35%),
                radial-gradient(circle at 80% 15%, rgba(0,90,200,0.65) 0%, transparent 38%),
                radial-gradient(circle at 50% 80%, rgba(160,120,255,0.60) 0%, transparent 40%),
                radial-gradient(circle at 25% 60%, rgba(0,140,200,0.60) 0%, transparent 28%),
                radial-gradient(circle at 70% 45%, rgba(120,160,230,0.60) 0%, transparent 30%),
                radial-gradient(circle at 40% 30%, rgba(190,220,255,0.65) 0%, transparent 32%),
                radial-gradient(circle at 90% 70%, rgba(80,30,160,0.55) 0%, transparent 30%),
                radial-gradient(circle at 15% 25%, rgba(255,255,255,0.35) 0%, transparent 12%),
                radial-gradient(circle at 33% 12%, rgba(0,120,255,0.70) 0%, transparent 14%),
                radial-gradient(circle at 55% 70%, rgba(0,40,120,0.70) 0%, transparent 15%),
                radial-gradient(circle at 82% 40%, rgba(170,100,255,0.60) 0%, transparent 14%),
                radial-gradient(circle at 45% 85%, rgba(0,180,200,0.55) 0%, transparent 12%),
                radial-gradient(circle at 10% 55%, rgba(200,230,255,0.55) 0%, transparent 12%),
                radial-gradient(circle at 60% 30%, rgba(0,0,140,0.70) 0%, transparent 15%),
                radial-gradient(circle at 85% 15%, rgba(255,255,255,0.30) 0%, transparent 12%),
                radial-gradient(circle at 40% 60%, rgba(0,150,255,0.65) 0%, transparent 15%),
                radial-gradient(circle at 20% 90%, rgba(0,30,90,0.70) 0%, transparent 14%),
                #6f98d8;
            background-blend-mode: overlay, screen, overlay;
        }

        .btn {
            background: #003366;
            border: 3px solid #003366;
            border-radius: 10px;
            font-size: 1.6vw;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
            text-decoration: none;
            color: white;
            transition: background 0.2s;
        }

        .btn:hover {
            background: #1a4d8f;
        }

        .inactive {
            opacity: 0.25;
            cursor: default;
            background: rgba(0, 51, 102, 0.4); 
            color: rgba(255, 255, 255, 0.6);
        }
    </style>


    <!-- ============================
         DATE + TIME SCRIPT
         ============================ -->
    <script>
        function updateTime() {
            const now = new Date();

            const dateOptions = { weekday: 'long', month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString(undefined, dateOptions);

            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12 || 12;

            const timeStr = `${hours}:${minutes} ${ampm}`;

            document.getElementById('date').textContent = dateStr;
            document.getElementById('time').textContent = timeStr;
        }

        setInterval(updateTime, 1000);
        window.onload = updateTime;
    </script>


<body>

    <div class="container">


        <!-- ============================
             TOP SECTION
             ============================ -->
        <div class="top">


            <!-- ============================
                 DATE + TIME COLUMN
                 ============================ -->
            <div class="datetime">
                <div id="datetimeBox" class="datetime-box grad-clear text-white">
                    <div class="date" id="date"></div>
                    <div class="time" id="time"></div>
                </div>
            </div>


            <!-- ============================
                 LOGO COLUMN
                 ============================ -->
            <div class="logo">
                <img src="CT-STATE-Tunxis-RGB.png" alt="CT State Tunxis Logo">
            </div>


            <!-- ============================
                 WEATHER COLUMN
                 ============================ -->
            <div class="weather">
                <div id="weatherBox" class="weather-box grad-clear text-white">
                    <div class="weather-content">

                        <div class="weather-left">
                            <div id="weatherTemp" class="weather-temp"></div>
                        </div>

                        <div class="weather-right">
                            <img id="weatherIcon" class="weather-icon" src="" alt="Weather Icon">
                            <div id="weatherCondition" class="weather-condition"></div>
                        </div>

                    </div>
                </div>
            </div>

        </div> <!-- end .top -->


        <!-- ============================
             ANNOUNCEMENTS BAR
             ============================ -->
        <div class="announcements">
            Winter Break Reminder: All campus offices will close at 4:00 PM today.
            Shuttle service will continue running on a reduced schedule.
            Please check your email for updated transportation details.
        </div>


        <!-- ============================
             BUTTON GRID (3 x 5)
             ============================ -->
        <div class="buttons">

            <!-- ===== ROW 1 ===== -->
            <a class="btn" href="https://www.google.com" target="_blank">Google Search</a>
            <a class="btn" href="https://copilot.microsoft.com" target="_blank">Microsoft Copilot</a>
            <div class="btn inactive"></div>

            <!-- ===== ROW 2 ===== -->
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>

            <!-- ===== ROW 3 ===== -->
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>

            <!-- ===== ROW 4 ===== -->
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>

            <!-- ===== ROW 5 ===== -->
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>
            <div class="btn inactive"></div>

        </div> <!-- end .buttons -->

    </div> <!-- end .container -->


    <!-- ============================
         WEATHER SCRIPT
         ============================ -->
    <script>
        const LAT = 41.719;
        const LON = -72.829;


        /* ============================
           WEATHER ICON MAP
           ============================ */
        const iconMap = {
            0: "clear-day.svg",
            1: "mostly-clear-day.svg",
            2: "partly-cloudy-day.svg",
            3: "cloudy.svg",
            45: "fog.svg",
            48: "fog.svg",
            51: "drizzle.svg",
            53: "drizzle.svg",
            55: "drizzle.svg",
            56: "sleet.svg",
            57: "sleet.svg",
            61: "rain.svg",
            63: "rain.svg",
            65: "rain.svg",
            66: "sleet.svg",
            67: "sleet.svg",
            71: "snow.svg",
            73: "snow.svg",
            75: "snow.svg",
            77: "snow.svg",
            80: "rain.svg",
            81: "rain.svg",
            82: "rain.svg",
            85: "snow.svg",
            86: "snow.svg",
            95: "thunderstorm.svg",
            96: "thunderstorm.svg",
            99: "thunderstorm.svg"
        };


        /* ============================
           HUMAN-FRIENDLY CONDITION NAMES
           ============================ */
        const conditionNames = {
            0: "Clear Sky",
            1: "Mostly Clear",
            2: "Partly Cloudy",
            3: "Cloudy",
            45: "Fog",
            48: "Fog",
            51: "Light Drizzle",
            53: "Drizzle",
            55: "Heavy Drizzle",
            56: "Freezing Drizzle",
            57: "Freezing Drizzle",
            61: "Light Rain",
            63: "Rain",
            65: "Heavy Rain",
            66: "Freezing Rain",
            67: "Freezing Rain",
            71: "Light Snow",
            73: "Snow",
            75: "Heavy Snow",
            77: "Snow Grains",
            80: "Rain Showers",
            81: "Rain Showers",
            82: "Heavy Showers",
            85: "Snow Showers",
            86: "Snow Showers",
            95: "Thunderstorm",
            96: "Thunderstorm",
            99: "Thunderstorm"
        };


        /* ============================
           GRADIENT MAP — DAY
           ============================ */
        const gradientDay = {
            0: "grad-clear",
            1: "grad-clear",
            2: "grad-partly",
            3: "grad-cloudy",
            45: "grad-fog",
            48: "grad-fog",
            51: "grad-rain",
            53: "grad-rain",
            55: "grad-rain",
            61: "grad-rain",
            63: "grad-rain",
            65: "grad-rain",
            71: "grad-snow",
            73: "grad-snow",
            75: "grad-snow",
            77: "grad-snow",
            80: "grad-rain",
            81: "grad-rain",
            82: "grad-rain",
            85: "grad-snow",
            86: "grad-snow",
            95: "grad-thunder",
            96: "grad-thunder",
            99: "grad-thunder"
        };


        /* ============================
           GRADIENT MAP — NIGHT
           ============================ */
        const gradientNight = {
            0: "grad-night-clear",
            1: "grad-night-clear",
            2: "grad-night-cloudy",
            3: "grad-night-cloudy",
            45: "grad-night-cloudy",
            48: "grad-night-cloudy",
            51: "grad-night-rain",
            53: "grad-night-rain",
            55: "grad-night-rain",
            61: "grad-night-rain",
            63: "grad-night-rain",
            65: "grad-night-rain",
            71: "grad-night-snow",
            73: "grad-night-snow",
            75: "grad-night-snow",
            77: "grad-night-snow",
            80: "grad-night-rain",
            81: "grad-night-rain",
            82: "grad-night-rain",
            85: "grad-night-snow",
            86: "grad-night-snow",
            95: "grad-night-thunder",
            96: "grad-night-thunder",
            99: "grad-night-thunder"
        };


        /* ============================
           TEXT COLOR MAP
           ============================ */
        const textColorMap = {
            "grad-clear": "text-white",
            "grad-partly": "text-white",
            "grad-cloudy": "text-white",
            "grad-fog": "text-blue",
            "grad-rain": "text-white",
            "grad-snow": "text-blue",
            "grad-thunder": "text-white",

            "grad-night-clear": "text-white",
            "grad-night-cloudy": "text-white",
            "grad-night-rain": "text-white",
            "grad-night-snow": "text-blue",
            "grad-night-thunder": "text-white"
        };


        /* ============================
           WEATHER LOADER
           ============================ */
        async function loadWeather() {
            const url =
                `https://api.open-meteo.com/v1/forecast?latitude=${LAT}` +
                `&longitude=${LON}` +
                `&current_weather=true&daily=sunrise,sunset&timezone=auto` +
                `&temperature_unit=fahrenheit`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                const temp = Math.round(data.current_weather.temperature);
                const code = data.current_weather.weathercode;

                const now = new Date();
                const sunrise = new Date(data.daily.sunrise[0]);
                const sunset = new Date(data.daily.sunset[0]);

                const isNight = now < sunrise || now > sunset;

                const gradientClass = isNight
                    ? (gradientNight[code] || "grad-night-cloudy")
                    : (gradientDay[code] || "grad-cloudy");

                const textClass = textColorMap[gradientClass] || "text-white";

                const box = document.getElementById("weatherBox");
                box.className = `weather-box ${gradientClass} ${textClass}`;

                const datetimeBox = document.getElementById("datetimeBox");
                datetimeBox.className = `datetime-box ${gradientClass} ${textClass}`;

                document.getElementById("weatherTemp").textContent = `${temp}°F`;
                document.getElementById("weatherCondition").textContent =
                    conditionNames[code] || "Unknown";

                const iconFile = iconMap[code] || "cloudy.svg";
                document.getElementById("weatherIcon").src = `icons/${iconFile}`;

            } catch (err) {
                document.getElementById("weatherCondition").textContent = "Weather Error";
            }
        }

        loadWeather();
        setInterval(loadWeather, 10 * 60 * 1000);
    </script>

</body>
</html>
